/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,n={597:(t,n,e)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function i(t,n,e){return(n=function(t){var n=function(t){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Date(t).toLocaleDateString(n,function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?o(Object(e),!0).forEach((function(n){i(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({year:"numeric",month:"long",day:"numeric"},e))}const u="https://story-api.dicoding.dev/v1",c="STORY_APP_AUTH_TOKEN",f="STORY_APP_USER_NAME",s={coords:[-6.2,106.816666],zoom:13,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'};function l(){return sessionStorage.getItem(c)}function p(){return!!l()}var y=e(481),v=e.n(y),d=(e(274),e(927)),m=e(272),h=e(980);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function g(){var t=j(),n=t.m(g),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,w(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(g=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new P(t,n)},AsyncIterator:O,async:function(t,n,e,o,a){return(r(n)?S:k)(i(t),n,e,o,a)},keys:x,values:w}})()}function w(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(b(t)+" is not iterable")}function x(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function k(t,n,e,r,o){var i=S(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function S(t,n,e,r,o){return new O(j().w(t,n,e,r),o||Promise)}function O(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof P?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(_(O.prototype),_(O.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),_(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function j(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return _(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(_(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,_(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,_(l,"constructor",f),_(f,"constructor",c),c.displayName="GeneratorFunction",_(f,o,"GeneratorFunction"),_(l),_(l,o,"Generator"),_(l,r,(function(){return this})),_(l,"toString",(function(){return"[object Generator]"})),(j=function(){return{w:i,m:p}})()}function _(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}_=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){_(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},_(t,n,e,r)}function P(t,n){this.v=t,this.k=n}function T(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}delete v().Icon.Default.prototype._getIconUrl,v().Icon.Default.mergeOptions({iconUrl:d,iconRetinaUrl:m,shadowUrl:h,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});var E=null,G=null;function N(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=document.getElementById("message-modal"),o=document.getElementById("message-modal-title"),i=document.getElementById("message-modal-text");if(r&&o&&i){o.textContent=t,i.textContent=n,o.className="text-xl font-semibold ","error"===e?o.classList.add("text-red-600"):"success"===e?o.classList.add("text-green-600"):o.classList.add("text-gray-800"),r.classList.remove("hidden");var a=r.querySelector("#message-modal-close-button");a&&a.focus()}}function F(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Lokasi",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;E&&(E.remove(),E=null);var a,u=document.getElementById(t);return u&&v()?(null===u.offsetParent&&console.warn("Kontainer map '".concat(t,"' tidak terlihat saat init. Map mungkin tidak terender dengan benar.")),E=v().map(t).setView(n,s.zoom),v().tileLayer(s.tileLayer,{maxZoom:19,attribution:s.attribution}).addTo(E),(r||o&&n[0]!==s.coords[0])&&(a=v().marker(n).addTo(E),e&&a.bindPopup(e).openPopup()),o&&E.on("click",(function(t){var n={lat:t.latlng.lat,lon:t.latlng.lng};a?a.setLatLng(t.latlng):a=v().marker(t.latlng).addTo(E);var e="Lokasi dipilih: ".concat(n.lat.toFixed(5),", ").concat(n.lon.toFixed(5));a.bindPopup(e).openPopup(),i&&i(n)})),setTimeout((function(){E&&E.invalidateSize()}),150),E):(console.error("Elemen map dengan ID '".concat(t,"' tidak ditemukan atau Leaflet tidak termuat.")),null)}function I(t,n,e){return L.apply(this,arguments)}function L(){var t;return t=g().mark((function t(n,e,r){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(A(),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){t.next=19;break}return t.prev=2,t.next=5,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});case 5:return G=t.sent,n&&(n.srcObject=G,n.parentElement.classList.remove("hidden")),e&&e.classList.add("hidden"),t.abrupt("return",G);case 11:return t.prev=11,t.t0=t.catch(2),console.error("Error mengakses kamera: ",t.t0),r&&r("Tidak bisa mengakses kamera: ".concat(t.t0.message,". Pastikan Anda memberikan izin.")),n&&n.parentElement.classList.add("hidden"),t.abrupt("return",null);case 17:t.next=21;break;case 19:return r&&r("Browser Anda tidak mendukung akses kamera."),t.abrupt("return",null);case 21:case"end":return t.stop()}}),t,null,[[2,11]])})),L=function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){T(i,r,o,a,u,"next",t)}function u(t){T(i,r,o,a,u,"throw",t)}a(void 0)}))},L.apply(this,arguments)}function A(){if(G){G.getTracks().forEach((function(t){return t.stop()})),G=null;var t=document.getElementById("camera-container");t&&t.classList.add("hidden");var n=document.getElementById("camera-feed");n&&(n.srcObject=null)}}function B(t,n,e){if(G&&t&&n){var r=document.createElement("canvas");r.width=t.videoWidth,r.height=t.videoHeight,r.getContext("2d").drawImage(t,0,0,r.width,r.height),n.src=r.toDataURL("image/jpeg"),n.classList.remove("hidden"),r.toBlob((function(t){if(t&&e){var n=new File([t],"captured_story_image.jpg",{type:"image/jpeg"});e(n)}}),"image/jpeg"),A()}}function C(t,n,e){var r,o=null===(r=t.target.files)||void 0===r?void 0:r[0];if(o&&n&&e){e(o);var i=new FileReader;i.onload=function(t){var e;null!==(e=t.target)&&void 0!==e&&e.result&&(n.src=t.target.result.toString(),n.classList.remove("hidden"))},i.readAsDataURL(o),A()}}var D=e(730);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function H(){var t=q(),n=t.m(H),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,R(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(H=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new J(t,n)},AsyncIterator:Y,async:function(t,n,e,o,a){return(r(n)?W:U)(i(t),n,e,o,a)},keys:K,values:R}})()}function R(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(M(t)+" is not iterable")}function K(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function U(t,n,e,r,o){var i=W(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function W(t,n,e,r,o){return new Y(q().w(t,n,e,r),o||Promise)}function Y(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof J?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(z(Y.prototype),z(Y.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),z(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function q(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return z(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(z(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,z(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,z(l,"constructor",f),z(f,"constructor",c),c.displayName="GeneratorFunction",z(f,o,"GeneratorFunction"),z(l),z(l,o,"Generator"),z(l,r,(function(){return this})),z(l,"toString",(function(){return"[object Generator]"})),(q=function(){return{w:i,m:p}})()}function z(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}z=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){z(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},z(t,n,e,r)}function J(t,n){this.v=t,this.k=n}function V(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function Q(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?V(Object(e),!0).forEach((function(n){Z(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):V(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function Z(t,n,e){return(n=function(t){var n=function(t){if("object"!=M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=M(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function $(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function X(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){$(i,r,o,a,u,"next",t)}function u(t){$(i,r,o,a,u,"throw",t)}a(void 0)}))}}function tt(t){return nt.apply(this,arguments)}function nt(){return nt=X(H().mark((function t(n){var e,r,o,i,a,c,f=arguments;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.length>1&&void 0!==f[1]?f[1]:{},r="".concat(u).concat(n),o=l(),i=Q({},e.headers),o&&(i.Authorization="Bearer ".concat(o)),e.body instanceof FormData||(i["Content-Type"]="application/json"),t.prev=6,t.next=9,fetch(r,Q(Q({},e),{},{headers:i}));case 9:return a=t.sent,t.next=12,a.json();case 12:if(!(c=t.sent).error){t.next=15;break}throw new Error(c.message||"An unknown API error occurred.");case 15:return t.abrupt("return",c);case 18:throw t.prev=18,t.t0=t.catch(6),console.error("API call to ".concat(n," failed:"),t.t0),t.t0;case 22:case"end":return t.stop()}}),t,null,[[6,18]])}))),nt.apply(this,arguments)}function et(t,n,e){return rt.apply(this,arguments)}function rt(){return(rt=X(H().mark((function t(n,e,r){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",tt("/register",{method:"POST",body:JSON.stringify({name:n,email:e,password:r})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ot(t,n){return it.apply(this,arguments)}function it(){return(it=X(H().mark((function t(n,e){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",tt("/login",{method:"POST",body:JSON.stringify({email:n,password:e})}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function at(){return ut.apply(this,arguments)}function ut(){return ut=X(H().mark((function t(){var n,e,r,o=arguments;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:1,e=o.length>1&&void 0!==o[1]?o[1]:20,r=o.length>2&&void 0!==o[2]?o[2]:0,t.abrupt("return",tt("/stories?page=".concat(n,"&size=").concat(e,"&location=").concat(r)));case 4:case"end":return t.stop()}}),t)}))),ut.apply(this,arguments)}function ct(t){return ft.apply(this,arguments)}function ft(){return(ft=X(H().mark((function t(n){return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",tt("/stories/".concat(n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(t,n,e,r){return lt.apply(this,arguments)}function lt(){return(lt=X(H().mark((function t(n,e,r,o){var i;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=new FormData).append("description",n),i.append("photo",e),null===r||null===o||isNaN(r)||isNaN(o)||(i.append("lat",parseFloat(r)),i.append("lon",parseFloat(o))),t.abrupt("return",tt("/stories",{method:"POST",body:i}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(t){return yt.apply(this,arguments)}function yt(){return(yt=X(H().mark((function t(n){var e,r;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.toJSON(),r={endpoint:e.endpoint,keys:{p256dh:e.keys.p256dh,auth:e.keys.auth}},t.abrupt("return",tt("/notifications/subscribe",{method:"POST",body:JSON.stringify(r)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vt(t){return dt.apply(this,arguments)}function dt(){return(dt=X(H().mark((function t(n){var e;return H().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={endpoint:n.endpoint},t.abrupt("return",tt("/notifications/subscribe",{method:"DELETE",body:JSON.stringify(e)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function ht(){var t=St(),n=t.m(ht),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,bt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ht=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new jt(t,n)},AsyncIterator:kt,async:function(t,n,e,o,a){return(r(n)?xt:wt)(i(t),n,e,o,a)},keys:gt,values:bt}})()}function bt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(mt(t)+" is not iterable")}function gt(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function wt(t,n,e,r,o){var i=xt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function xt(t,n,e,r,o){return new kt(St().w(t,n,e,r),o||Promise)}function kt(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof jt?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ot(kt.prototype),Ot(kt.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ot(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function St(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Ot(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Ot(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Ot(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Ot(l,"constructor",f),Ot(f,"constructor",c),c.displayName="GeneratorFunction",Ot(f,o,"GeneratorFunction"),Ot(l),Ot(l,o,"Generator"),Ot(l,r,(function(){return this})),Ot(l,"toString",(function(){return"[object Generator]"})),(St=function(){return{w:i,m:p}})()}function Ot(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ot=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Ot(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Ot(t,n,e,r)}function jt(t,n){this.v=t,this.k=n}function _t(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Pt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){_t(i,r,o,a,u,"next",t)}function u(t){_t(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Tt(t){for(var n=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),e=window.atob(n),r=new Uint8Array(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}var Et=function(){var t=Pt(ht().mark((function t(){var n;return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("serviceWorker"in navigator){t.next=3;break}return console.log("Service Worker tidak didukung di browser ini."),t.abrupt("return");case 3:return n=new D.JK("/starter-project-with-webpack/sw.js"),t.prev=4,t.next=7,n.register();case 7:console.log("Service worker berhasil didaftarkan."),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log("Gagal mendaftarkan service worker.",t.t0);case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(){return t.apply(this,arguments)}}(),Gt=function(){var t=Pt(ht().mark((function t(){var n,e;return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("Notification"in window&&"serviceWorker"in navigator){t.next=3;break}return N("Fitur Tidak Didukung","Browser Anda tidak mendukung notifikasi.","error"),t.abrupt("return");case 3:return t.next=5,Notification.requestPermission();case 5:if("granted"===t.sent){t.next=9;break}return N("Izin Ditolak","Anda tidak mengizinkan notifikasi.","info"),t.abrupt("return");case 9:return t.prev=9,t.next=12,navigator.serviceWorker.ready;case 12:return n=t.sent,t.next=15,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Tt("BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk")});case 15:return e=t.sent,t.next=18,pt(e);case 18:N("Berhasil","Anda berhasil berlangganan notifikasi.","success"),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(9),console.error("Gagal berlangganan notifikasi:",t.t0),N("Gagal","Gagal berlangganan notifikasi: ".concat(t.t0.message),"error");case 25:case"end":return t.stop()}}),t,null,[[9,21]])})));return function(){return t.apply(this,arguments)}}(),Nt=e(602);function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function It(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return Lt(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Lt(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(u)throw i}}}}function Lt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function At(){var t=Rt(),n=t.m(At),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Bt(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(At=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Ut(t,n)},AsyncIterator:Ht,async:function(t,n,e,o,a){return(r(n)?Mt:Dt)(i(t),n,e,o,a)},keys:Ct,values:Bt}})()}function Bt(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ft(t)+" is not iterable")}function Ct(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Dt(t,n,e,r,o){var i=Mt(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Mt(t,n,e,r,o){return new Ht(Rt().w(t,n,e,r),o||Promise)}function Ht(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Ut?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Kt(Ht.prototype),Kt(Ht.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Kt(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Rt(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Kt(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Kt(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Kt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Kt(l,"constructor",f),Kt(f,"constructor",c),c.displayName="GeneratorFunction",Kt(f,o,"GeneratorFunction"),Kt(l),Kt(l,o,"Generator"),Kt(l,r,(function(){return this})),Kt(l,"toString",(function(){return"[object Generator]"})),(Rt=function(){return{w:i,m:p}})()}function Kt(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Kt=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Kt(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Kt(t,n,e,r)}function Ut(t,n){this.v=t,this.k=n}function Wt(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Yt(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Wt(i,r,o,a,u,"next",t)}function u(t){Wt(i,r,o,a,u,"throw",t)}a(void 0)}))}}var qt="stories",zt="pending-stories",Jt="bookmarked-stories",Vt=(0,Nt.P2)("ceritakita-db",1,{upgrade:function(t){t.objectStoreNames.contains(qt)||t.createObjectStore(qt,{keyPath:"id"}),t.objectStoreNames.contains(zt)||t.createObjectStore(zt,{autoIncrement:!0,keyPath:"id"}),t.objectStoreNames.contains(Jt)||t.createObjectStore(Jt,{keyPath:"id"})}});const Qt=function(){return Yt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vt;case 2:return t.abrupt("return",t.sent.getAll(qt));case 3:case"end":return t.stop()}}),t)})))()},Zt=function(t){return Yt(At().mark((function n(){var e,r,o,i;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&0!==t.length){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Vt;case 4:e=n.sent.transaction(qt,"readwrite"),r=It(t);try{for(r.s();!(o=r.n()).done;)i=o.value,e.store.put(i)}catch(t){r.e(t)}finally{r.f()}return n.next=9,e.done;case 9:case"end":return n.stop()}}),n)})))()},$t=function(){return Yt(At().mark((function t(){var n;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vt;case 2:return n=t.sent.transaction(qt,"readwrite"),t.next=5,n.store.clear();case 5:return t.abrupt("return",n.done);case 6:case"end":return t.stop()}}),t)})))()},Xt=function(t){return Yt(At().mark((function n(){return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vt;case 2:return n.abrupt("return",n.sent.add(zt,t));case 3:case"end":return n.stop()}}),n)})))()},tn=function(){return Yt(At().mark((function t(){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vt;case 2:return t.abrupt("return",t.sent.getAll(Jt));case 3:case"end":return t.stop()}}),t)})))()},nn=function(t){return Yt(At().mark((function n(){return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vt;case 2:return n.abrupt("return",n.sent.get(Jt,t));case 3:case"end":return n.stop()}}),n)})))()},en=function(t){return Yt(At().mark((function n(){return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&t.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Vt;case 4:return n.abrupt("return",n.sent.put(Jt,t));case 5:case"end":return n.stop()}}),n)})))()},rn=function(t){return Yt(At().mark((function n(){return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vt;case 2:return n.abrupt("return",n.sent.delete(Jt,t));case 3:case"end":return n.stop()}}),n)})))()};function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function an(){var t=pn(),n=t.m(an),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,un(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(an=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new vn(t,n)},AsyncIterator:ln,async:function(t,n,e,o,a){return(r(n)?sn:fn)(i(t),n,e,o,a)},keys:cn,values:un}})()}function un(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(on(t)+" is not iterable")}function cn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function fn(t,n,e,r,o){var i=sn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function sn(t,n,e,r,o){return new ln(pn().w(t,n,e,r),o||Promise)}function ln(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof vn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(yn(ln.prototype),yn(ln.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),yn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function pn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return yn(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(yn(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,yn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,yn(l,"constructor",f),yn(f,"constructor",c),c.displayName="GeneratorFunction",yn(f,o,"GeneratorFunction"),yn(l),yn(l,o,"Generator"),yn(l,r,(function(){return this})),yn(l,"toString",(function(){return"[object Generator]"})),(pn=function(){return{w:i,m:p}})()}function yn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}yn=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){yn(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},yn(t,n,e,r)}function vn(t,n){this.v=t,this.k=n}function dn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function mn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hn(r.key),r)}}function hn(t){var n=function(t){if("object"!=on(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=on(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==on(n)?n:n+""}const bn=function(){return t=function t(n){var e=n.view,r=n.app;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._app=r},n=[{key:"_loadStories",value:(e=an().mark((function t(){var n,e;return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,at();case 3:return n=t.sent,this._view.showStories(n.listStory),t.next=7,Zt(n.listStory);case 7:t.next=16;break;case 9:return t.prev=9,t.t0=t.catch(0),console.log("Gagal mengambil dari jaringan, mencoba dari IndexedDB..."),t.next=14,Qt();case 14:(e=t.sent)&&e.length>0?(this._view.showStories(e),this._view.showError("Anda sedang offline. Menampilkan data yang tersimpan.")):this._view.showError(t.t0.message||"Tidak ada data yang bisa ditampilkan.");case 16:case"end":return t.stop()}}),t,this,[[0,9]])})),r=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){dn(i,r,o,a,u,"next",t)}function u(t){dn(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})}],n&&mn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function gn(t){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(t)}function wn(){var t=_n(),n=t.m(wn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,xn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(wn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Tn(t,n)},AsyncIterator:jn,async:function(t,n,e,o,a){return(r(n)?On:Sn)(i(t),n,e,o,a)},keys:kn,values:xn}})()}function xn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(gn(t)+" is not iterable")}function kn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Sn(t,n,e,r,o){var i=On(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function On(t,n,e,r,o){return new jn(_n().w(t,n,e,r),o||Promise)}function jn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Tn?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Pn(jn.prototype),Pn(jn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Pn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function _n(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Pn(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Pn(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Pn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Pn(l,"constructor",f),Pn(f,"constructor",c),c.displayName="GeneratorFunction",Pn(f,o,"GeneratorFunction"),Pn(l),Pn(l,o,"Generator"),Pn(l,r,(function(){return this})),Pn(l,"toString",(function(){return"[object Generator]"})),(_n=function(){return{w:i,m:p}})()}function Pn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pn=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Pn(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Pn(t,n,e,r)}function Tn(t,n){this.v=t,this.k=n}function En(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Gn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){En(i,r,o,a,u,"next",t)}function u(t){En(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Nn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fn(r.key),r)}}function Fn(t){var n=function(t){if("object"!=gn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=gn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gn(n)?n:n+""}const In=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Gn(wn().mark((function t(){return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p()){t.next=3;break}return window.location.hash="#/login",t.abrupt("return","<p>Anda harus login untuk melihat halaman ini.</p>");case 3:return t.abrupt("return",'\n      <section class="story-list-container container">\n        <h1 class="text-3xl font-bold mb-4 text-gray-700">Kumpulan Cerita</h1>\n        \n        <div class="home-controls mb-6 flex flex-wrap items-center gap-3">\n          <button id="subscribe-notification-button" class="btn btn-outline-green">\n            Aktifkan Notifikasi\n          </button>\n          <button id="clear-cache-button" class="btn btn-outline-yellow">\n            Hapus Cache Cerita\n          </button>\n        </div>\n        <div id="stories-container">\n          <div class="spinner" aria-label="Memuat cerita..."></div>\n        </div>\n      </section>\n    ');case 4:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Gn(wn().mark((function t(){var n,e;return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p()&&(new bn({view:this,app:this})._loadStories(),n=document.getElementById("subscribe-notification-button"),e=document.getElementById("clear-cache-button"),n&&n.addEventListener("click",function(){var t=Gn(wn().mark((function t(n){return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.target.disabled=!0,t.next=3,Gt();case 3:n.target.disabled=!1;case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()),e&&e.addEventListener("click",Gn(wn().mark((function t(){return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$t();case 3:N("Berhasil","Data cerita offline berhasil dihapus.","success"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),N("Gagal","Gagal menghapus data: ".concat(t.t0.message),"error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"showError",value:function(t){var n=document.getElementById("stories-container");n&&(n.innerHTML='<p class="text-center text-red-500">Gagal memuat cerita: '.concat(t,"</p>")),t.includes("offline")||N("Gagal Memuat Cerita",t,"error")}},{key:"showStories",value:function(t){var n=document.getElementById("stories-container");if(n)if(t&&0!==t.length){var e='<div class="stories-grid">';t.forEach((function(t){var n=t.photoUrl||"https://placehold.co/600x400/e2e8f0/94a3b8?text=Gambar+Tidak+Tersedia";e+='\n        <article class="story-card">\n          <img src="'.concat(n,'" alt="Foto cerita dari ').concat(t.name||"Anonim",'" loading="lazy" onerror="this.onerror=null;this.src=\'https://placehold.co/600x400/e2e8f0/94a3b8?text=Error\';">\n          <div class="story-card-content">\n            <h3>').concat(t.name||"Pengguna CeritaKita",'</h3>\n            <p class="story-description" title="').concat(t.description||"",'">').concat(t.description||"Tidak ada deskripsi.",'</p>\n            <p class="story-date">Dibuat pada: ').concat(a(t.createdAt),'</p>\n          </div>\n          <div class="story-card-footer">\n            <a href="#/story/').concat(t.id,'">Lihat Detail & Peta</a>\n          </div>\n        </article>\n      ')})),e+="</div>",n.innerHTML=e}else n.innerHTML='\n        <p class="text-center text-gray-600">Belum ada cerita yang dibagikan. Jadilah yang pertama!</p>\n        <div class="text-center mt-4"><a href="#/add-story" class="text-blue-600 hover:underline">Bagikan Ceritamu Sekarang</a></div>\n      '}}],n&&Nn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Ln(t){return Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ln(t)}function An(){var t=Rn(),n=t.m(An),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Bn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(An=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Un(t,n)},AsyncIterator:Hn,async:function(t,n,e,o,a){return(r(n)?Mn:Dn)(i(t),n,e,o,a)},keys:Cn,values:Bn}})()}function Bn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Ln(t)+" is not iterable")}function Cn(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Dn(t,n,e,r,o){var i=Mn(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Mn(t,n,e,r,o){return new Hn(Rn().w(t,n,e,r),o||Promise)}function Hn(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Un?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Kn(Hn.prototype),Kn(Hn.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Kn(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Rn(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Kn(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Kn(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Kn(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Kn(l,"constructor",f),Kn(f,"constructor",c),c.displayName="GeneratorFunction",Kn(f,o,"GeneratorFunction"),Kn(l),Kn(l,o,"Generator"),Kn(l,r,(function(){return this})),Kn(l,"toString",(function(){return"[object Generator]"})),(Rn=function(){return{w:i,m:p}})()}function Kn(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Kn=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Kn(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Kn(t,n,e,r)}function Un(t,n){this.v=t,this.k=n}function Wn(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Yn(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Wn(i,r,o,a,u,"next",t)}function u(t){Wn(i,r,o,a,u,"throw",t)}a(void 0)}))}}function qn(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zn(r.key),r)}}function zn(t){var n=function(t){if("object"!=Ln(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Ln(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ln(n)?n:n+""}const Jn=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._loginSubmitHandler=null},n=[{key:"onLoginSubmit",value:function(t){this._loginSubmitHandler=t}},{key:"validateForm",value:function(t){var n=t.email,e=t.password;return n&&e}},{key:"showSuccess",value:function(t){N("Login Successful",t,"success")}},{key:"showError",value:function(t){N("Login Failed",t,"error")}},{key:"render",value:(r=Yn(An().mark((function t(){return An().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section aria-labelledby="login-heading" class="max-w-md mx-auto">\n        <h1 id="login-heading" class="text-3xl font-bold text-center mb-8 text-gray-700">Masuk ke Akun Anda</h1>\n        <form id="login-form" class="space-y-6" novalidate>\n          <div>\n            <label for="login-email" class="block text-sm font-medium text-gray-700">Email</label>\n            <input type="email" id="login-email" name="email" required autocomplete="email" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="email@contoh.com">\n          </div>\n          <div>\n            <label for="login-password" class="block text-sm font-medium text-gray-700">Kata Sandi</label>\n            <input type="password" id="login-password" name="password" required autocomplete="current-password" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="">\n          </div>\n          <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">\n            Masuk\n          </button>\n          <p class="text-sm text-center text-gray-600">Belum punya akun? <a href="#/register" class="font-medium text-blue-600 hover:text-blue-500">Daftar di sini</a></p>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Yn(An().mark((function t(){var n=this;return An().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("login-form").addEventListener("submit",(function(t){t.preventDefault();var e=t.target.email.value,r=t.target.password.value;n._loginSubmitHandler&&n._loginSubmitHandler({email:e,password:r})}));case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&qn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function Qn(){var t=ee(),n=t.m(Qn),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Zn(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Qn=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new oe(t,n)},AsyncIterator:ne,async:function(t,n,e,o,a){return(r(n)?te:Xn)(i(t),n,e,o,a)},keys:$n,values:Zn}})()}function Zn(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Vn(t)+" is not iterable")}function $n(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Xn(t,n,e,r,o){var i=te(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function te(t,n,e,r,o){return new ne(ee().w(t,n,e,r),o||Promise)}function ne(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof oe?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(re(ne.prototype),re(ne.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),re(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ee(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return re(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(re(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,re(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,re(l,"constructor",f),re(f,"constructor",c),c.displayName="GeneratorFunction",re(f,o,"GeneratorFunction"),re(l),re(l,o,"Generator"),re(l,r,(function(){return this})),re(l,"toString",(function(){return"[object Generator]"})),(ee=function(){return{w:i,m:p}})()}function re(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}re=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){re(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},re(t,n,e,r)}function oe(t,n){this.v=t,this.k=n}function ie(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ae(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){ie(i,r,o,a,u,"next",t)}function u(t){ie(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ue(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ce(r.key),r)}}function ce(t){var n=function(t){if("object"!=Vn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Vn(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vn(n)?n:n+""}const fe=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._registerSubmitHandler=null},n=[{key:"onRegisterSubmit",value:function(t){this._registerSubmitHandler=t}},{key:"validateForm",value:function(t){var n=t.name,e=t.email,r=t.password;return n&&e&&r&&r.length>=8}},{key:"showSuccess",value:function(t){N("Registration Successful",t,"success")}},{key:"showError",value:function(t){N("Registration Failed",t,"error")}},{key:"render",value:(r=ae(Qn().mark((function t(){return Qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section aria-labelledby="register-heading" class="max-w-md mx-auto">\n        <h1 id="register-heading" class="text-3xl font-bold text-center mb-8 text-gray-700">Buat Akun Baru</h1>\n        <form id="register-form" class="space-y-6" novalidate>\n          <div>\n            <label for="register-name" class="block text-sm font-medium text-gray-700">Nama</label>\n            <input type="text" id="register-name" name="name" required autocomplete="name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Nama Anda">\n          </div>\n          <div>\n            <label for="register-email" class="block text-sm font-medium text-gray-700">Email</label>\n            <input type="email" id="register-email" name="email" required autocomplete="email" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="email@contoh.com">\n          </div>\n          <div>\n            <label for="register-password" class="block text-sm font-medium text-gray-700">Kata Sandi</label>\n            <input type="password" id="register-password" name="password" required minlength="8" autocomplete="new-password" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Minimal 8 karakter">\n          </div>\n          <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">\n            Daftar\n          </button>\n          <p class="text-sm text-center text-gray-600">Sudah punya akun? <a href="#/login" class="font-medium text-blue-600 hover:text-blue-500">Masuk di sini</a></p>\n        </form>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=ae(Qn().mark((function t(){var n=this;return Qn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("register-form").addEventListener("submit",(function(t){t.preventDefault();var e=t.target.name.value,r=t.target.email.value,o=t.target.password.value;n._registerSubmitHandler&&n._registerSubmitHandler({name:e,email:r,password:o})}));case 2:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&ue(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function se(t){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},se(t)}function le(){var t=he(),n=t.m(le),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,pe(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(le=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new ge(t,n)},AsyncIterator:me,async:function(t,n,e,o,a){return(r(n)?de:ve)(i(t),n,e,o,a)},keys:ye,values:pe}})()}function pe(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(se(t)+" is not iterable")}function ye(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ve(t,n,e,r,o){var i=de(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function de(t,n,e,r,o){return new me(he().w(t,n,e,r),o||Promise)}function me(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof ge?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(be(me.prototype),be(me.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),be(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function he(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return be(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(be(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,be(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,be(l,"constructor",f),be(f,"constructor",c),c.displayName="GeneratorFunction",be(f,o,"GeneratorFunction"),be(l),be(l,o,"Generator"),be(l,r,(function(){return this})),be(l,"toString",(function(){return"[object Generator]"})),(he=function(){return{w:i,m:p}})()}function be(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}be=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){be(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},be(t,n,e,r)}function ge(t,n){this.v=t,this.k=n}function we(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function xe(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){we(i,r,o,a,u,"next",t)}function u(t){we(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ke(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Se(r.key),r)}}function Se(t){var n=function(t){if("object"!=se(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=se(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==se(n)?n:n+""}const Oe=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSubmitHandler=null,this.capturedFile=null,this.selectedLocation=null},n=[{key:"onFormSubmit",value:function(t){this._formSubmitHandler=t}},{key:"updateSubmitButton",value:function(t){var n=document.querySelector('#add-story-form button[type="submit"]');n.disabled=t,n.textContent=t?"Mengunggah...":"Bagikan Cerita"}},{key:"render",value:(r=xe(le().mark((function t(){return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p()){t.next=3;break}return window.location.hash="#/login",t.abrupt("return","<p>Anda harus login untuk mengakses halaman ini.</p>");case 3:return this.capturedFile=null,this.selectedLocation=null,A(),t.abrupt("return",'\n      <section aria-labelledby="add-story-heading" class="add-story-section container max-w-2xl mx-auto">\n        <h1 id="add-story-heading" class="text-3xl font-bold text-center mb-8 text-gray-700">Bagikan Cerita Baru Anda</h1>\n        <form id="add-story-form" novalidate>\n          <div>\n            <label for="add-story-description" class="block text-sm font-medium text-gray-700 mb-1">Deskripsi Cerita</label>\n            <textarea id="add-story-description" name="description" rows="4" required placeholder="Tuliskan ceritamu di sini..."></textarea>\n          </div>\n\n          <div>\n            <p id="photo-group-label" class="block text-sm font-medium text-gray-700">Foto Cerita (Wajib)</p>\n            <div class="image-buttons-container mt-1">\n              <button type="button" id="start-camera-button">Buka Kamera</button>\n              \n              <input type="file" id="image-upload-input" accept="image/*" class="sr-only">\n              <button type="button" id="upload-image-button">Unggah Gambar</button>\n            </div>\n            <div id="camera-container" class="hidden mt-2">\n              <video id="camera-feed" autoplay playsinline class="w-full rounded-md border"></video>\n              <div class="mt-2 flex gap-2">\n                <button type="button" id="capture-image-button">Ambil Foto</button>\n                <button type="button" id="stop-camera-button">Tutup Kamera</button>\n              </div>\n            </div>\n            <img id="captured-image-preview" src="#" alt="Pratinjau gambar" class="hidden mt-4 max-w-full max-h-80 mx-auto rounded-md border"/>\n          </div>\n\n          <div>\n            <label id="map-label" class="block text-sm font-medium text-gray-700">Lokasi Cerita (Opsional)</label>\n            <div id="add-story-map-container" class="map-container" aria-labelledby="map-label"></div>\n            <p id="selected-coords-display" class="text-sm text-gray-600 mt-2">Koordinat belum dipilih.</p>\n          </div>\n          \n          <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400">Bagikan Cerita</button>\n        </form>\n      </section>\n    ');case 7:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=xe(le().mark((function t(){var n,e,r,o,i,a=this;return le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p()){t.next=2;break}return t.abrupt("return");case 2:F("add-story-map-container",s.coords,"Pilih Lokasi",!1,!0,(function(t){a.selectedLocation=t,document.getElementById("selected-coords-display").textContent="Koordinat: Lat ".concat(t.lat.toFixed(5),", Lon ").concat(t.lon.toFixed(5))})),n=document.getElementById("add-story-form"),e=document.getElementById("image-upload-input"),r=document.getElementById("upload-image-button"),o=document.getElementById("captured-image-preview"),i=document.getElementById("camera-feed"),r.addEventListener("click",(function(){e.click()})),document.getElementById("start-camera-button").onclick=function(){return I(i,o,(function(t){return N("Kamera Error",t,"error")}))},document.getElementById("stop-camera-button").onclick=A,document.getElementById("capture-image-button").onclick=function(){return B(i,o,(function(t){a.capturedFile=t}))},e.onchange=function(t){return C(t,o,(function(t){a.capturedFile=t}))},n.addEventListener("submit",(function(t){t.preventDefault(),a._formSubmitHandler&&a._formSubmitHandler({description:n.elements.description.value,photo:a.capturedFile,lat:a.selectedLocation?a.selectedLocation.lat:null,lon:a.selectedLocation?a.selectedLocation.lon:null})}));case 14:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&ke(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function je(t){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},je(t)}function _e(){var t=Fe(),n=t.m(_e),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Pe(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(_e=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Le(t,n)},AsyncIterator:Ne,async:function(t,n,e,o,a){return(r(n)?Ge:Ee)(i(t),n,e,o,a)},keys:Te,values:Pe}})()}function Pe(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(je(t)+" is not iterable")}function Te(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ee(t,n,e,r,o){var i=Ge(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Ge(t,n,e,r,o){return new Ne(Fe().w(t,n,e,r),o||Promise)}function Ne(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Le?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Ie(Ne.prototype),Ie(Ne.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Ie(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Fe(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Ie(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Ie(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Ie(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Ie(l,"constructor",f),Ie(f,"constructor",c),c.displayName="GeneratorFunction",Ie(f,o,"GeneratorFunction"),Ie(l),Ie(l,o,"Generator"),Ie(l,r,(function(){return this})),Ie(l,"toString",(function(){return"[object Generator]"})),(Fe=function(){return{w:i,m:p}})()}function Ie(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ie=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Ie(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Ie(t,n,e,r)}function Le(t,n){this.v=t,this.k=n}function Ae(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Be(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Ae(i,r,o,a,u,"next",t)}function u(t){Ae(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ce(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,De(r.key),r)}}function De(t){var n=function(t){if("object"!=je(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=je(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==je(n)?n:n+""}const Me=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._story=null},n=[{key:"render",value:(o=Be(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p()){t.next=3;break}return window.location.hash="#/login",t.abrupt("return","<p>Anda harus login untuk melihat halaman ini.</p>");case 3:return t.abrupt("return",'\n      <section class="story-detail-section container">\n        <a href="#/" class="back-link">&larr; Kembali ke Daftar Cerita</a>\n        \n        <div id="story-detail-content">\n          <h1 id="story-detail-heading" class="text-3xl font-bold text-gray-800 mb-2">Memuat cerita...</h1>\n          <p id="story-meta-date" class="story-meta-date"></p>\n          \n          <img id="story-image-detail" src="https://placehold.co/800x600/e2e8f0/94a3b8?text=Memuat+Gambar..." alt="Memuat gambar cerita" class="story-image-detail">\n          \n          <div class="story-description-detail">\n            <p id="story-description-text">Memuat deskripsi...</p>\n          </div>\n          \n          <div id="map-location-section">\n              <p class="text-gray-600 mb-6">Memuat lokasi...</p>\n          </div>\n        </div>\n\n        <div id="bookmark-button-container" class="mt-6"></div>\n        <div id="story-detail-error" class="hidden text-center text-red-500"></div>\n      </section>\n    ');case 4:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"afterRender",value:(r=Be(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"fillStoryDetails",value:function(t){if(t){this._story=t;var n=document.getElementById("story-detail-heading"),e=document.getElementById("story-meta-date"),r=document.getElementById("story-image-detail"),o=document.getElementById("story-description-text"),i=document.getElementById("map-location-section");n&&(n.textContent=t.name||"Pengguna CeritaKita"),e&&(e.textContent="Dibuat pada: ".concat(a(t.createdAt,"id-ID",{hour:"2-digit",minute:"2-digit"}))),r&&(r.src=t.photoUrl,r.alt="Foto cerita dari ".concat(t.name||"Anonim")),o&&(o.textContent=t.description||"Tidak ada deskripsi."),t.lat&&t.lon?i&&(i.innerHTML='\n          <h2 class="story-location-heading">Lokasi Cerita</h2>\n          <div id="story-detail-map" class="map-container"></div>\n        ',setTimeout((function(){F("story-detail-map",[t.lat,t.lon],t.name||"Lokasi Cerita",!0)}),0)):i&&(i.innerHTML='<p class="text-gray-600 mb-6">Lokasi untuk cerita ini tidak tersedia.</p>'),this._renderBookmarkButton()}else this.showError("Data cerita tidak ditemukan.")}},{key:"showError",value:function(t){var n=document.getElementById("story-detail-error"),e=document.getElementById("story-detail-content");e&&(e.innerHTML=""),n&&(n.classList.remove("hidden"),n.textContent="Gagal memuat cerita: ".concat(t)),N("Gagal Memuat Detail",t,"error")}},{key:"_renderBookmarkButton",value:(e=Be(_e().mark((function t(){var n,e,r,o=this;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("bookmark-button-container"),t.next=3,nn(this._story.id);case 3:e=t.sent,n.innerHTML='\n      <button id="bookmarkButton" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white">\n        Loading...\n      </button>\n    ',r=document.getElementById("bookmarkButton"),this._updateBookmarkButtonVisual(r,e),r.addEventListener("click",Be(_e().mark((function t(){var n;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nn(o._story.id);case 2:if(!(n=t.sent)){t.next=9;break}return t.next=6,rn(o._story.id);case 6:N("Dihapus","Cerita dihapus dari daftar simpanan.","info"),t.next=12;break;case 9:return t.next=11,en(o._story);case 11:N("Disimpan","Cerita berhasil disimpan untuk dilihat offline.","success");case 12:o._updateBookmarkButtonVisual(r,!n);case 13:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_updateBookmarkButtonVisual",value:function(t,n){n?(t.textContent="Hapus dari Simpanan",t.classList.remove("bg-blue-600","hover:bg-blue-700"),t.classList.add("bg-red-600","hover:bg-red-700")):(t.textContent="Simpan untuk Offline",t.classList.remove("bg-red-600","hover:bg-red-700"),t.classList.add("bg-blue-600","hover:bg-blue-700"))}}],n&&Ce(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r,o}();function He(t){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},He(t)}function Re(){var t=ze(),n=t.m(Re),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Ke(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Re=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Ve(t,n)},AsyncIterator:qe,async:function(t,n,e,o,a){return(r(n)?Ye:We)(i(t),n,e,o,a)},keys:Ue,values:Ke}})()}function Ke(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(He(t)+" is not iterable")}function Ue(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function We(t,n,e,r,o){var i=Ye(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Ye(t,n,e,r,o){return new qe(ze().w(t,n,e,r),o||Promise)}function qe(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Ve?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Je(qe.prototype),Je(qe.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Je(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function ze(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Je(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Je(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Je(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Je(l,"constructor",f),Je(f,"constructor",c),c.displayName="GeneratorFunction",Je(f,o,"GeneratorFunction"),Je(l),Je(l,o,"Generator"),Je(l,r,(function(){return this})),Je(l,"toString",(function(){return"[object Generator]"})),(ze=function(){return{w:i,m:p}})()}function Je(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Je=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Je(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Je(t,n,e,r)}function Ve(t,n){this.v=t,this.k=n}function Qe(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ze(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Qe(i,r,o,a,u,"next",t)}function u(t){Qe(i,r,o,a,u,"throw",t)}a(void 0)}))}}function $e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xe(r.key),r)}}function Xe(t){var n=function(t){if("object"!=He(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=He(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==He(n)?n:n+""}var tr=function(t){var n=t.photoUrl||"https://placehold.co/600x400/e2e8f0/94a3b8?text=Gambar+Tidak+Tersedia&font=raleway";return'\n    <article class="story-card">\n      <img src="'.concat(n,'" alt="Foto cerita dari ').concat(t.name||"Anonim",'" loading="lazy" onerror="this.onerror=null;this.src=\'https://placehold.co/600x400/e2e8f0/94a3b8?text=Error&font=raleway\';">\n      <div class="story-card-content">\n        <h3>').concat(t.name||"Pengguna CeritaKita",'</h3>\n        <p class="story-description" title="').concat(t.description||"",'">').concat(t.description||"Tidak ada deskripsi.",'</p>\n        <p class="story-date">Dibuat pada: ').concat(a(t.createdAt),'</p>\n      </div>\n      <div class="story-card-footer">\n        <a href="#/story/').concat(t.id,'">Lihat Detail & Peta</a>\n      </div>\n    </article>\n  ')};function nr(t){return nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nr(t)}function er(){var t=cr(),n=t.m(er),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,rr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(er=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new sr(t,n)},AsyncIterator:ur,async:function(t,n,e,o,a){return(r(n)?ar:ir)(i(t),n,e,o,a)},keys:or,values:rr}})()}function rr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(nr(t)+" is not iterable")}function or(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function ir(t,n,e,r,o){var i=ar(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function ar(t,n,e,r,o){return new ur(cr().w(t,n,e,r),o||Promise)}function ur(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof sr?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(fr(ur.prototype),fr(ur.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),fr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function cr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return fr(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(fr(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,fr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,fr(l,"constructor",f),fr(f,"constructor",c),c.displayName="GeneratorFunction",fr(f,o,"GeneratorFunction"),fr(l),fr(l,o,"Generator"),fr(l,r,(function(){return this})),fr(l,"toString",(function(){return"[object Generator]"})),(cr=function(){return{w:i,m:p}})()}function fr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}fr=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){fr(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},fr(t,n,e,r)}function sr(t,n){this.v=t,this.k=n}function lr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function pr(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){lr(i,r,o,a,u,"next",t)}function u(t){lr(i,r,o,a,u,"throw",t)}a(void 0)}))}}const yr={"/":In,"/login":Jn,"/register":fe,"/add-story":Oe,"/story/:id":Me,"/about":function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Ze(Re().mark((function t(){return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="about-page-section container max-w-3xl mx-auto py-8 px-4">\n        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Tentang Aplikasi CeritaKita</h1>\n        \n        <div class="bg-white shadow-md rounded-lg p-6 mb-8">\n          <p class="text-gray-700 leading-relaxed mb-4">\n            <strong>CeritaKita</strong> adalah sebuah platform digital yang dirancang untuk memungkinkan pengguna berbagi cerita dan pengalaman mereka dengan komunitas. \n            Aplikasi ini dibangun sebagai bagian dari submission untuk kelas "Menjadi Front-End Web Developer Expert" di Dicoding.\n          </p>\n          <p class="text-gray-700 leading-relaxed mb-4">\n            Kami percaya bahwa setiap orang memiliki cerita yang berharga untuk dibagikan, dan melalui CeritaKita, kami berharap dapat menciptakan ruang yang aman dan inspiratif \n            bagi para pengguna untuk mengekspresikan diri, terhubung dengan orang lain, dan menemukan perspektif baru.\n          </p>\n        </div>\n\n        <div class="bg-white shadow-md rounded-lg p-6">\n          <h2 class="text-2xl font-semibold text-gray-700 mb-4">Fitur Utama:</h2>\n          <ul class="list-disc list-inside text-gray-700 leading-relaxed">\n            <li class="mb-2">Registrasi dan Login Pengguna</li>\n            <li class="mb-2">Menampilkan daftar cerita dari berbagai pengguna</li>\n            <li class="mb-2">Menambahkan cerita baru, lengkap dengan deskripsi dan foto</li>\n            <li class="mb-2">Mengambil foto langsung dari kamera perangkat</li>\n            <li class="mb-2">Memilih lokasi cerita menggunakan peta interaktif</li>\n            <li class="mb-2">Menampilkan detail cerita beserta lokasi di peta (jika tersedia)</li>\n            <li class="mb-2">Antarmuka yang responsif dan aksesibel</li>\n            <li class="mb-2">Transisi halaman yang halus untuk pengalaman pengguna yang lebih baik</li>\n            <li class="mb-2">Dukungan offline dan dapat di-install (PWA)</li>\n            <li class="mb-2">Push Notifications untuk update terbaru</li>\n          </ul>\n        </div>\n        \n        <div class="mt-8 text-center text-sm text-gray-600">\n          <p>Aplikasi ini memanfaatkan Story API yang disediakan oleh Dicoding.</p>\n          <p>Dibangun dengan teknologi web modern termasuk HTML, CSS, JavaScript, dan Webpack.</p>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Ze(Re().mark((function t(){return Re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&$e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}(),"/bookmark":{render:function(){return pr(er().mark((function t(){return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container mx-auto py-8 px-4">\n        <h1 class="text-3xl font-bold text-center mb-8 text-gray-700">Cerita Tersimpan</h1>\n        <div id="bookmarked-stories-container" class="stories-grid">\n          <div class="spinner" aria-label="Memuat cerita tersimpan..."></div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)})))()},afterRender:function(){return pr(er().mark((function t(){var n,e,r;return er().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("bookmarked-stories-container"),t.prev=1,t.next=4,tn();case 4:if(0!==(e=t.sent).length){t.next=8;break}return n.innerHTML='<p class="text-center col-span-full text-gray-500">Anda belum menyimpan cerita apapun.</p>',t.abrupt("return");case 8:r="",e.forEach((function(t){r+=tr(t)})),n.innerHTML=r,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),n.innerHTML='<p class="text-center col-span-full text-red-500">Gagal memuat cerita tersimpan.</p>',console.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()}}};function vr(t){var n=t.split("/");return{resource:n[1]||null,id:n[2]||null}}function dr(t){var n="";return t.resource&&(n=n.concat("/".concat(t.resource))),t.id&&(n=n.concat("/:id")),n||"/"}function mr(){return location.hash.replace("#","")||"/"}function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function br(){var t=Or(),n=t.m(br),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,gr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(br=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new _r(t,n)},AsyncIterator:Sr,async:function(t,n,e,o,a){return(r(n)?kr:xr)(i(t),n,e,o,a)},keys:wr,values:gr}})()}function gr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(hr(t)+" is not iterable")}function wr(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function xr(t,n,e,r,o){var i=kr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function kr(t,n,e,r,o){return new Sr(Or().w(t,n,e,r),o||Promise)}function Sr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof _r?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(jr(Sr.prototype),jr(Sr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),jr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Or(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return jr(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(jr(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,jr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,jr(l,"constructor",f),jr(f,"constructor",c),c.displayName="GeneratorFunction",jr(f,o,"GeneratorFunction"),jr(l),jr(l,o,"Generator"),jr(l,r,(function(){return this})),jr(l,"toString",(function(){return"[object Generator]"})),(Or=function(){return{w:i,m:p}})()}function jr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}jr=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){jr(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},jr(t,n,e,r)}function _r(t,n){this.v=t,this.k=n}function Pr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Tr(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){Pr(i,r,o,a,u,"next",t)}function u(t){Pr(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Er(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gr(r.key),r)}}function Gr(t){var n=function(t){if("object"!=hr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=hr(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hr(n)?n:n+""}const Nr=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"render",value:(r=Tr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container text-center py-20">\n        <h1 class="text-6xl font-bold text-blue-600 mb-4">404</h1>\n        <p class="text-2xl text-gray-700 mb-8">Halaman Tidak Ditemukan</p>\n        <p class="text-gray-600 mb-8">Maaf, halaman yang Anda cari tidak ada atau telah dipindahkan.</p>\n        <a href="#/" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-colors no-underline">Kembali ke Beranda</a>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(e=Tr(br().mark((function t(){return br().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})}],n&&Er(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Fr(t){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fr(t)}function Ir(){var t=Mr(),n=t.m(Ir),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Lr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Ir=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Rr(t,n)},AsyncIterator:Dr,async:function(t,n,e,o,a){return(r(n)?Cr:Br)(i(t),n,e,o,a)},keys:Ar,values:Lr}})()}function Lr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Fr(t)+" is not iterable")}function Ar(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Br(t,n,e,r,o){var i=Cr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Cr(t,n,e,r,o){return new Dr(Mr().w(t,n,e,r),o||Promise)}function Dr(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Rr?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Hr(Dr.prototype),Hr(Dr.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Hr(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Mr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Hr(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Hr(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Hr(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Hr(l,"constructor",f),Hr(f,"constructor",c),c.displayName="GeneratorFunction",Hr(f,o,"GeneratorFunction"),Hr(l),Hr(l,o,"Generator"),Hr(l,r,(function(){return this})),Hr(l,"toString",(function(){return"[object Generator]"})),(Mr=function(){return{w:i,m:p}})()}function Hr(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Hr=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Hr(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Hr(t,n,e,r)}function Rr(t,n){this.v=t,this.k=n}function Kr(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Ur(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wr(r.key),r)}}function Wr(t){var n=function(t){if("object"!=Fr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Fr(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fr(n)?n:n+""}const Yr=function(){return t=function t(n){var e=n.view,r=n.app;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._app=r,this._view.onLoginSubmit(this._login.bind(this))},n=[{key:"_login",value:(e=Ir().mark((function t(n){var e,r,o;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.email,r=n.password,this._view.validateForm({email:e,password:r})){t.next=4;break}return this._view.showError("Email and password are required."),t.abrupt("return");case 4:return this._app.showGlobalLoading(),t.prev=5,t.next=8,ot(e,r);case 8:if(!(o=t.sent).error&&o.loginResult){t.next=11;break}throw new Error(o.message||"Login failed. Please check your credentials.");case 11:i=o.loginResult.token,a=o.loginResult.name,sessionStorage.setItem(c,i),sessionStorage.setItem(f,a),this._view.showSuccess("Welcome back, ".concat(o.loginResult.name,"!")),this._app.updateNavLinks(),window.location.hash="#/",t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),this._view.showError(t.t0.message);case 20:return t.prev=20,this._app.hideGlobalLoading(),t.finish(20);case 23:case"end":return t.stop()}var i,a}),t,this,[[5,17,20,23]])})),r=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){Kr(i,r,o,a,u,"next",t)}function u(t){Kr(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return r.apply(this,arguments)})}],n&&Ur(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function zr(){var t=Xr(),n=t.m(zr),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Jr(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(zr=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new no(t,n)},AsyncIterator:$r,async:function(t,n,e,o,a){return(r(n)?Zr:Qr)(i(t),n,e,o,a)},keys:Vr,values:Jr}})()}function Jr(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(qr(t)+" is not iterable")}function Vr(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Qr(t,n,e,r,o){var i=Zr(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Zr(t,n,e,r,o){return new $r(Xr().w(t,n,e,r),o||Promise)}function $r(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof no?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(to($r.prototype),to($r.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),to(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Xr(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return to(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(to(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,to(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,to(l,"constructor",f),to(f,"constructor",c),c.displayName="GeneratorFunction",to(f,o,"GeneratorFunction"),to(l),to(l,o,"Generator"),to(l,r,(function(){return this})),to(l,"toString",(function(){return"[object Generator]"})),(Xr=function(){return{w:i,m:p}})()}function to(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}to=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){to(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},to(t,n,e,r)}function no(t,n){this.v=t,this.k=n}function eo(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function ro(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oo(r.key),r)}}function oo(t){var n=function(t){if("object"!=qr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=qr(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qr(n)?n:n+""}const io=function(){return t=function t(n){var e=n.view,r=n.app;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._app=r,this._view.onRegisterSubmit(this._register.bind(this))},n=[{key:"_register",value:(e=zr().mark((function t(n){var e,r,o,i;return zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.name,r=n.email,o=n.password,this._view.validateForm({name:e,email:r,password:o})){t.next=4;break}return this._view.showError("All fields are required."),t.abrupt("return");case 4:return this._app.showGlobalLoading(),t.prev=5,t.next=8,et(e,r,o);case 8:if(!(i=t.sent).error){t.next=11;break}throw new Error(i.message||"Registration failed. Please try again.");case 11:this._view.showSuccess("Account created successfully. Please log in."),window.location.hash="#/login",t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),this._view.showError(t.t0.message);case 18:return t.prev=18,this._app.hideGlobalLoading(),t.finish(18);case 21:case"end":return t.stop()}}),t,this,[[5,15,18,21]])})),r=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){eo(i,r,o,a,u,"next",t)}function u(t){eo(i,r,o,a,u,"throw",t)}a(void 0)}))},function(t){return r.apply(this,arguments)})}],n&&ro(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function ao(t){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(t)}function uo(){var t=yo(),n=t.m(uo),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,co(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(uo=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new mo(t,n)},AsyncIterator:po,async:function(t,n,e,o,a){return(r(n)?lo:so)(i(t),n,e,o,a)},keys:fo,values:co}})()}function co(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ao(t)+" is not iterable")}function fo(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function so(t,n,e,r,o){var i=lo(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function lo(t,n,e,r,o){return new po(yo().w(t,n,e,r),o||Promise)}function po(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof mo?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(vo(po.prototype),vo(po.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),vo(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function yo(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return vo(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(vo(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,vo(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,vo(l,"constructor",f),vo(f,"constructor",c),c.displayName="GeneratorFunction",vo(f,o,"GeneratorFunction"),vo(l),vo(l,o,"Generator"),vo(l,r,(function(){return this})),vo(l,"toString",(function(){return"[object Generator]"})),(yo=function(){return{w:i,m:p}})()}function vo(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}vo=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){vo(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},vo(t,n,e,r)}function mo(t,n){this.v=t,this.k=n}function ho(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function bo(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,go(r.key),r)}}function go(t){var n=function(t){if("object"!=ao(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=ao(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ao(n)?n:n+""}const wo=function(){return t=function t(n){var e=n.view,r=n.app,o=n.urlParams;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._app=r,this._storyId=o.id,this._loadStoryDetail()},n=[{key:"_loadStoryDetail",value:(e=uo().mark((function t(){var n;return uo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._storyId){t.next=3;break}return this._view.showError("Story ID tidak ditemukan di URL."),t.abrupt("return");case 3:return t.prev=3,t.next=6,ct(this._storyId);case 6:n=t.sent,this._view.fillStoryDetails(n.story),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),this._view.showError(t.t0.message);case 13:case"end":return t.stop()}}),t,this,[[3,10]])})),r=function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(t){ho(i,r,o,a,u,"next",t)}function u(t){ho(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})}],n&&bo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function xo(t){return xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xo(t)}function ko(){var t=To(),n=t.m(ko),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,So(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ko=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Go(t,n)},AsyncIterator:Po,async:function(t,n,e,o,a){return(r(n)?_o:jo)(i(t),n,e,o,a)},keys:Oo,values:So}})()}function So(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(xo(t)+" is not iterable")}function Oo(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function jo(t,n,e,r,o){var i=_o(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function _o(t,n,e,r,o){return new Po(To().w(t,n,e,r),o||Promise)}function Po(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Go?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Eo(Po.prototype),Eo(Po.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Eo(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function To(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Eo(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Eo(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Eo(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Eo(l,"constructor",f),Eo(f,"constructor",c),c.displayName="GeneratorFunction",Eo(f,o,"GeneratorFunction"),Eo(l),Eo(l,o,"Generator"),Eo(l,r,(function(){return this})),Eo(l,"toString",(function(){return"[object Generator]"})),(To=function(){return{w:i,m:p}})()}function Eo(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Eo=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Eo(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Eo(t,n,e,r)}function Go(t,n){this.v=t,this.k=n}function No(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function Fo(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){No(i,r,o,a,u,"next",t)}function u(t){No(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Io(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lo(r.key),r)}}function Lo(t){var n=function(t){if("object"!=xo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=xo(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xo(n)?n:n+""}const Ao=function(){return t=function t(n){var e=n.view,r=n.app;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this._view=e,this._app=r,this._isSubmitting=!1,this._view.onFormSubmit(this._handleFormSubmit.bind(this))},n=[{key:"_handleFormSubmit",value:(r=Fo(ko().mark((function t(n){var e,r,o,i,a;return ko().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.description,r=n.photo,o=n.lat,i=n.lon,!this._isSubmitting){t.next=3;break}return t.abrupt("return");case 3:if(e&&r){t.next=6;break}return N("Validasi Gagal","Deskripsi dan foto cerita wajib diisi.","error"),t.abrupt("return");case 6:return this._isSubmitting=!0,this._view.updateSubmitButton(!0),this._app.showGlobalLoading(),t.prev=9,t.next=12,st(e,r,o,i);case 12:if(!(a=t.sent).error){t.next=15;break}throw new Error(a.message);case 15:this._app.hideGlobalLoading(),N("Cerita Ditambahkan","Cerita baru Anda telah berhasil dibagikan!","success"),window.location.hash="#/",t.next=31;break;case 20:if(t.prev=20,t.t0=t.catch(9),console.error("Gagal mengunggah cerita:",t.t0.message),!1!==navigator.onLine&&!t.t0.message.includes("Failed to fetch")){t.next=28;break}return t.next=26,this._saveForSync({description:e,photo:r,lat:o,lon:i});case 26:t.next=31;break;case 28:this._app.hideGlobalLoading(),N("Gagal Mengunggah Cerita",t.t0.message,"error"),this._view.updateSubmitButton(!1);case 31:return t.prev=31,this._isSubmitting=!1,t.finish(31);case 34:case"end":return t.stop()}}),t,this,[[9,20,31,34]])}))),function(t){return r.apply(this,arguments)})},{key:"_saveForSync",value:(e=Fo(ko().mark((function t(n){return ko().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xt(n);case 2:"serviceWorker"in navigator&&"SyncManager"in window&&navigator.serviceWorker.ready.then((function(t){t.sync.register("add-new-story-sync")})),this._app.hideGlobalLoading(),N("Mode Offline","Cerita disimpan dan akan diunggah saat kembali online.","info"),window.location.hash="#/";case 6:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}],n&&Io(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function Bo(t){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function Co(){var t=Uo(),n=t.m(Co),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,Do(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(Co=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new Yo(t,n)},AsyncIterator:Ko,async:function(t,n,e,o,a){return(r(n)?Ro:Ho)(i(t),n,e,o,a)},keys:Mo,values:Do}})()}function Do(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(Bo(t)+" is not iterable")}function Mo(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function Ho(t,n,e,r,o){var i=Ro(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function Ro(t,n,e,r,o){return new Ko(Uo().w(t,n,e,r),o||Promise)}function Ko(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof Yo?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(Wo(Ko.prototype),Wo(Ko.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),Wo(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function Uo(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return Wo(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(Wo(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,Wo(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,Wo(l,"constructor",f),Wo(f,"constructor",c),c.displayName="GeneratorFunction",Wo(f,o,"GeneratorFunction"),Wo(l),Wo(l,o,"Generator"),Wo(l,r,(function(){return this})),Wo(l,"toString",(function(){return"[object Generator]"})),(Uo=function(){return{w:i,m:p}})()}function Wo(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Wo=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){Wo(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},Wo(t,n,e,r)}function Yo(t,n){this.v=t,this.k=n}function qo(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function zo(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){qo(i,r,o,a,u,"next",t)}function u(t){qo(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Jo(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Vo(r.key),r)}}function Vo(t){var n=function(t){if("object"!=Bo(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=Bo(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bo(n)?n:n+""}function Qo(t,n,e){(function(t,n){if(n.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,n),n.set(t,e)}function Zo(t,n){return t.get(Xo(t,n))}function $o(t,n,e){return t.set(Xo(t,n),e),e}function Xo(t,n,e){if("function"==typeof t?t===n:t.has(n))return arguments.length<3?n:e;throw new TypeError("Private element is not present on this object")}var ti=new WeakMap,ni=new WeakMap,ei=new WeakMap,ri=new WeakMap,oi=new WeakMap,ii=new WeakMap;const ai=function(){return t=function t(n){var e=n.content,r=n.drawerButton,o=n.navigationDrawer;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),Qo(this,ti,null),Qo(this,ni,null),Qo(this,ei,null),Qo(this,ri,null),Qo(this,oi,null),Qo(this,ii,""),$o(ti,this,e),$o(ri,this,e),$o(ni,this,r),$o(ei,this,o),$o(oi,this,document.getElementById("nav-list")),this._initialAppShell(),this._setupDrawer()},n=[{key:"_initialAppShell",value:function(){var t=document.getElementById("message-modal"),n=document.getElementById("message-modal-close-x"),e=document.getElementById("message-modal-close-button"),r=function(){return null==t?void 0:t.classList.add("hidden")};null==n||n.addEventListener("click",r),null==e||e.addEventListener("click",r),window.addEventListener("keydown",(function(n){"Escape"!==n.key||null!=t&&t.classList.contains("hidden")||r()}));var o=document.querySelector(".skip-link"),i=document.querySelector("#main-content");o&&i&&o.addEventListener("click",(function(t){t.preventDefault(),o.blur(),i.focus(),i.scrollIntoView()}));var a=document.getElementById("current-year");a&&(a.textContent=(new Date).getFullYear()),this.updateNavLinks()}},{key:"_setupDrawer",value:function(){var t=this;Zo(ni,this).addEventListener("click",(function(n){n.stopPropagation(),Zo(ei,t).classList.toggle("open")})),document.body.addEventListener("click",(function(n){Zo(ei,t).contains(n.target)||Zo(ni,t).contains(n.target)||Zo(ei,t).classList.remove("open")})),Zo(ei,this).addEventListener("click",(function(n){"A"!==n.target.tagName&&"BUTTON"!==n.target.tagName||Zo(ei,t).classList.remove("open")}))}},{key:"updateNavLinks",value:function(){var t=this;if(Zo(oi,this)){var n,e,r=p(),o=sessionStorage.getItem(f);e=r?'\n        <li><span class="text-sm hidden md:inline px-3 py-2">Halo, '.concat(o||"Pengguna",'!</span></li>\n        <li><a href="#/" class="nav-link">Beranda</a></li>\n        <li><a href="#/add-story" class="nav-link">Tambah Cerita</a></li>\n        <li><a href="#/bookmark" class="nav-link">Tersimpan</a></li> \x3c!-- TAMBAHKAN INI --\x3e\n        <li><a href="#/about" class="nav-link">Tentang</a></li>\n        <li><button id="logout-button-global" class="bg-red-500 hover:bg-red-600 px-3 py-1.5 rounded-md text-sm font-medium">Keluar</button></li>\n      '):'\n        <li><a href="#/login" class="nav-link">Masuk</a></li>\n        <li><a href="#/register" class="nav-link">Daftar</a></li>\n        <li><a href="#/about" class="nav-link">Tentang</a></li>\n      ',Zo(oi,this).innerHTML=e,r&&(null===(n=document.getElementById("logout-button-global"))||void 0===n||n.addEventListener("click",(function(){return t.handleLogout()})))}}},{key:"handleLogout",value:(r=zo(Co().mark((function t(){var n,e;return Co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(sessionStorage.removeItem(c),sessionStorage.removeItem(f),this.updateNavLinks(),N("Logout Berhasil","Anda telah berhasil keluar.","success"),window.location.hash="#/login",t.prev=4,!("serviceWorker"in navigator)||!("PushManager"in window)){t.next=18;break}return t.next=8,navigator.serviceWorker.ready;case 8:return n=t.sent,t.next=11,n.pushManager.getSubscription();case 11:if(!(e=t.sent)){t.next=18;break}return t.next=15,vt(e);case 15:return t.next=17,e.unsubscribe();case 17:console.log("Berhasil unsubscribe dari notifikasi di latar belakang.");case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(4),console.error("Gagal melakukan unsubscribe di latar belakang:",t.t0);case 23:case"end":return t.stop()}}),t,this,[[4,20]])}))),function(){return r.apply(this,arguments)})},{key:"showGlobalLoading",value:function(){var t;(t=Zo(ri,this))&&(t.innerHTML='<div class="spinner" aria-label="Memuat konten..."></div>')}},{key:"hideGlobalLoading",value:function(){var t=Zo(ri,this).querySelector(".spinner");null==t||t.remove()}},{key:"renderPage",value:(e=zo(Co().mark((function t(){var n,e,r,o,i;return Co().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Zo(ii,this).startsWith("#/add-story")&&!window.location.hash.startsWith("#/add-story")&&A(),$o(ii,this,window.location.hash),e=dr(vr(mr())),r=vr(mr()),i=new(o=yr[e]||Nr)(r),t.next=8,i.render();case 8:return Zo(ti,this).innerHTML=t.sent,t.next=11,i.afterRender(this);case 11:try{o===Jn?new Yr({view:i,app:this}):o===fe?new io({view:i,app:this}):o===Oe?new Ao({view:i,app:this}):o===Me&&new wo({view:i,app:this,urlParams:r})}catch(t){console.error("Error during presenter logic execution:",t)}null===(n=document.getElementById("main-content"))||void 0===n||n.focus({preventScroll:!0}),this.updateNavLinks();case 14:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],n&&Jo(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,r}();function ui(t){return ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ui(t)}function ci(){var t=vi(),n=t.m(ci),e=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function r(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===e||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function i(t){var n,e;return function(r){n||(n={stop:function(){return e(r.a,2)},catch:function(){return r.v},abrupt:function(t,n){return e(r.a,o[t],n)},delegateYield:function(t,o,i){return n.resultName=o,e(r.d,fi(t),i)},finish:function(t){return e(r.f,t)}},e=function(t,e,o){r.p=n.prev,r.n=n.next;try{return t(e,o)}finally{n.next=r.n}}),n.resultName&&(n[n.resultName]=r.v,n.resultName=void 0),n.sent=r.v,n.next=r.n;try{return t.call(this,n)}finally{r.p=n.prev,r.n=n.next}}}return(ci=function(){return{wrap:function(n,e,r,o){return t.w(i(n),e,r,o&&o.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(t,n){return new mi(t,n)},AsyncIterator:yi,async:function(t,n,e,o,a){return(r(n)?pi:li)(i(t),n,e,o,a)},keys:si,values:fi}})()}function fi(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],e=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}throw new TypeError(ui(t)+" is not iterable")}function si(t){var n=Object(t),e=[];for(var r in n)e.unshift(r);return function t(){for(;e.length;)if((r=e.pop())in n)return t.value=r,t.done=!1,t;return t.done=!0,t}}function li(t,n,e,r,o){var i=pi(t,n,e,r,o);return i.next().then((function(t){return t.done?t.value:i.next()}))}function pi(t,n,e,r,o){return new yi(vi().w(t,n,e,r),o||Promise)}function yi(t,n){function e(r,o,i,a){try{var u=t[r](o),c=u.value;return c instanceof mi?n.resolve(c.v).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):n.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return e("throw",t,i,a)}))}catch(t){a(t)}}var r;this.next||(di(yi.prototype),di(yi.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),di(this,"_invoke",(function(t,o,i){function a(){return new n((function(n,r){e(t,i,n,r)}))}return r=r?r.then(a,a):a()}),!0)}function vi(){var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",o=e.toStringTag||"@@toStringTag";function i(e,r,o,i){var c=r&&r.prototype instanceof u?r:u,f=Object.create(c.prototype);return di(f,"_invoke",function(e,r,o){var i,u,c,f=0,s=o||[],l=!1,p={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(n,e){return i=n,u=0,c=t,p.n=e,a}};function y(e,r){for(u=e,c=r,n=0;!l&&f&&!o&&n<s.length;n++){var o,i=s[n],y=p.p,v=i[2];e>3?(o=v===r)&&(c=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(u=0,p.v=r,p.n=i[1]):y<v&&(o=e<3||i[0]>r||r>v)&&(i[4]=e,i[5]=r,p.n=v,u=0))}if(o||e>1)return a;throw l=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&y(s,v),u=s,c=v;(n=u<2?t:c)||!l;){i||(u?u<3?(u>1&&(p.n=-1),y(u,c)):p.n=c:p.v=c);try{if(f=2,i){if(u||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=i.return)&&n.call(i),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==a)break}catch(n){i=t,u=1,c=n}finally{f=1}}return{value:n,done:l}}}(e,o,i),!0),f}var a={};function u(){}function c(){}function f(){}n=Object.getPrototypeOf;var s=[][r]?n(n([][r]())):(di(n={},r,(function(){return this})),n),l=f.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,di(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return c.prototype=f,di(l,"constructor",f),di(f,"constructor",c),c.displayName="GeneratorFunction",di(f,o,"GeneratorFunction"),di(l),di(l,o,"Generator"),di(l,r,(function(){return this})),di(l,"toString",(function(){return"[object Generator]"})),(vi=function(){return{w:i,m:p}})()}function di(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}di=function(t,n,e,r){if(n)o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e;else{var i=function(n,e){di(t,n,(function(t){return this._invoke(n,e,t)}))};i("next",0),i("throw",1),i("return",2)}},di(t,n,e,r)}function mi(t,n){this.v=t,this.k=n}function hi(t,n,e,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void e(t)}u.done?n(c):Promise.resolve(c).then(r,o)}function bi(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function a(t){hi(i,r,o,a,u,"next",t)}function u(t){hi(i,r,o,a,u,"throw",t)}a(void 0)}))}}document.addEventListener("DOMContentLoaded",bi(ci().mark((function t(){var n;return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new ai({content:document.querySelector("#app-view"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer")}),window.addEventListener("hashchange",bi(ci().mark((function t(){return ci().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.renderPage();case 2:case"end":return t.stop()}}),t)})))),t.next=4,n.renderPage();case 4:return t.next=6,Et();case 6:case"end":return t.stop()}}),t)}))))}},e={};function r(t){var o=e[t];if(void 0!==o)return o.exports;var i=e[t]={id:t,exports:{}};return n[t].call(i.exports,i,i.exports,r),i.exports}r.m=n,t=[],r.O=(n,e,o,i)=>{if(!e){var a=1/0;for(s=0;s<t.length;s++){for(var[e,o,i]=t[s],u=!0,c=0;c<e.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((t=>r.O[t](e[c])))?e.splice(c--,1):(u=!1,i<a&&(a=i));if(u){t.splice(s--,1);var f=o();void 0!==f&&(n=f)}}return n}i=i||0;for(var s=t.length;s>0&&t[s-1][2]>i;s--)t[s]=t[s-1];t[s]=[e,o,i]},r.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return r.d(n,{a:n}),n},r.d=(t,n)=>{for(var e in n)r.o(n,e)&&!r.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},r.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r.p="/starter-project-with-webpack/",(()=>{r.b=document.baseURI||self.location.href;var t={524:0};r.O.j=n=>0===t[n];var n=(n,e)=>{var o,i,[a,u,c]=e,f=0;if(a.some((n=>0!==t[n]))){for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(c)var s=c(r)}for(n&&n(e);f<a.length;f++)i=a[f],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(s)},e=self.webpackChunkapp_starter_project_with_webpack=self.webpackChunkapp_starter_project_with_webpack||[];e.forEach(n.bind(null,0)),e.push=n.bind(null,e.push.bind(e))})(),r.nc=void 0;var o=r.O(void 0,[638],(()=>r(597)));o=r.O(o)})();